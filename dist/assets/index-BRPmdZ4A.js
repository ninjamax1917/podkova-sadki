(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();function b(){const e=document.getElementById("year");e&&(e.textContent=String(new Date().getFullYear()))}function E(){try{const e=performance.getEntriesByType("navigation")[0];if(e&&e.type)return e.type}catch{}try{const e=performance.navigation&&performance.navigation.type;if(e===1)return"reload";if(e===2)return"back_forward"}catch{}return"navigate"}function L(){try{"scrollRestoration"in history&&(history.scrollRestoration="manual")}catch{}const e=`restore:${location.pathname}${location.search}`,o=a=>{if(!a)return!1;const d=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed",'[tabindex]:not([tabindex="-1"])','[contenteditable="true"]'];return a.matches?.(d.join(","))},t=()=>{try{const a=document.activeElement,d=a&&a!==document.body&&a!==document.documentElement&&(a.id||null),u={x:window.scrollX,y:window.scrollY,activeId:d,ts:Date.now()};sessionStorage.setItem(e,JSON.stringify(u))}catch{}};let r=0;const n=()=>{const a=Date.now();a-r>150&&(r=a,t())};window.addEventListener("scroll",n,{passive:!0}),window.addEventListener("focusin",n,!0),window.addEventListener("beforeunload",t),window.addEventListener("pagehide",t),document.addEventListener("visibilitychange",()=>{document.hidden&&t()});const s=a=>{try{const d=sessionStorage.getItem(e);if(!d)return!1;const u=JSON.parse(d);if(!u||typeof u.y!="number"||location.hash&&a==="navigate")return!1;if(setTimeout(()=>{if(window.__didEarlyRestore)return;const i=document.documentElement,l=i.style.scrollBehavior;i.style.scrollBehavior="auto",window.scrollTo(u.x||0,u.y||0),requestAnimationFrame(()=>{window.scrollTo(u.x||0,u.y||0),i.style.scrollBehavior=l||""})},0),u.activeId){const i=document.getElementById(u.activeId);if(i){const l=!o(i);l&&i.setAttribute("tabindex","-1");try{i.focus({preventScroll:!0})}catch{}l&&i.addEventListener("blur",()=>i.removeAttribute("tabindex"),{once:!0})}}return!0}catch{return!1}},c=E();window.addEventListener("pageshow",a=>{const d=a.persisted?"back_forward":c;s(d)}),window.addEventListener("load",()=>{s(c)},{once:!0});try{const a=`restore:has:${location.pathname}${location.search}`,d=sessionStorage.getItem(e)?"1":"";sessionStorage.setItem(a,d)}catch{}}function S(){try{"scrollRestoration"in history}catch{}const e=()=>window.matchMedia("(max-width: 639px)").matches,o=()=>!window.location.hash,t=()=>{try{const s=`restore:${location.pathname}${location.search}`,c=sessionStorage.getItem(s);if(!c)return!1;const a=JSON.parse(c);return a&&typeof a.y=="number"&&a.y>0}catch{return!1}},r=()=>{const s=document.documentElement,c=s.style.scrollBehavior;s.style.scrollBehavior="auto",window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0,requestAnimationFrame(()=>{window.scrollTo(0,0),s.style.scrollBehavior=c||""})},n=()=>{e()&&o()&&!t()&&r()};document.readyState==="complete"?n():window.addEventListener("load",n,{once:!0}),window.addEventListener("pageshow",s=>{s.persisted&&n()})}function I(){document.querySelectorAll('header a[href^="#"], nav a[href^="#"]').forEach(o=>{o.addEventListener("click",t=>{const r=o.getAttribute("href");if(!r||r==="#")return;const n=document.querySelector(r);n&&(t.preventDefault(),n.scrollIntoView({behavior:"smooth",block:"start"}),history.pushState(null,"",r))})})}function T(){const e=document.getElementById("backToTop"),o=()=>{if(!e)return;const t=window.scrollY>400;e.classList.toggle("opacity-100",t),e.classList.toggle("pointer-events-auto",t),e.classList.toggle("opacity-0",!t),e.classList.toggle("pointer-events-none",!t)};window.addEventListener("scroll",o,{passive:!0}),o(),e?.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})}function A(){b(),L(),S(),I(),T()}function x(e,o,t){const r=encodeURIComponent(e||""),n=encodeURIComponent(o||""),s=encodeURIComponent(t||"");return`Заявка с сайта «Подкова»%0AИмя: ${r}%0AТелефон: ${n}%0AСообщение: ${s}`}function B(){document.getElementById("contactSubmit")?.addEventListener("click",()=>{const o=(document.getElementById("cf-name")?.value||"").trim(),t=(document.getElementById("cf-phone")?.value||"").trim(),r=(document.getElementById("cf-message")?.value||"").trim(),n=x(o,t,r),c=`https://t.me/share/url?url=${encodeURIComponent("https://example.com")}&text=${n}`,a=`tg://msg?text=${n}`,d=window.open(a,"_blank");setTimeout(()=>{(!d||d.closed||typeof d.closed>"u")&&window.open(c,"_blank")},300)})}const C="d36b5481-4624-40a6-8698-b0dd0c33d972",h=[45.946525,38.111089];let y=null,w=!1;function k(){if(window.ymaps)return Promise.resolve();if(y)return y;const e=`https://api-maps.yandex.ru/2.1/?apikey=${encodeURIComponent(C)}&lang=ru_RU`;return y=new Promise((o,t)=>{const r=document.createElement("script");r.src=e,r.async=!0,r.onerror=()=>t(new Error("Yandex Maps API failed to load")),r.onload=()=>{window.ymaps?.ready?window.ymaps.ready(o):o()},document.head.appendChild(r)}),y}function O(e){try{e.textContent="";const o=new window.ymaps.Map(e,{center:h,zoom:17.3,controls:["zoomControl","fullscreenControl","routeButtonControl"]},{suppressMapOpenBlock:!0,yandexMapDisablePoiInteractivity:!0}),t=new window.ymaps.Placemark(h,{balloonContentHeader:"База отдыха «Подкова»",balloonContentBody:'Хутор Садки, Приморско‑Ахтарский район. Тел.: <a href="tel:+79131877470">+7 913 187‑74‑70</a>',hintContent:"База отдыха «Подкова»"},{preset:"islands#redIcon"});o.geoObjects.add(t);try{const n=o.controls.get("routeButtonControl");n&&n.routePanel&&(n.routePanel.state.set({fromEnabled:!0,to:h}),n.routePanel.options.set({allowSwitch:!0,types:{auto:!0,masstransit:!0,pedestrian:!0,bicycle:!0}}))}catch{}const r=()=>o.setCenter(h);window.addEventListener("resize",r)}catch{v(e)}}function v(e){if(!e)return;e.innerHTML="";const o="https://yandex.ru/map-widget/v1/?ll=38.111089%2C45.946525&pt=38.111089%2C45.946525&z=15",t=document.createElement("iframe");t.src=o,t.style.border="0",t.width="100%",t.height="100%",t.setAttribute("loading","lazy"),e.appendChild(t)}function R(){const e=document.getElementById("yandexMap");if(!e||w)return;w=!0;const o=()=>{k().then(()=>O(e)).catch(()=>v(e))};if("IntersectionObserver"in window){const t=new IntersectionObserver(r=>{r.some(s=>s.isIntersecting)&&(t.disconnect(),o())},{rootMargin:"200px"});t.observe(e)}else window.addEventListener("load",()=>setTimeout(o,500))}function g(){const e=()=>{const o=document.querySelector("header"),t=o?Math.ceil(o.getBoundingClientRect().height):64;document.documentElement.style.setProperty("--header-h",t+"px")};e(),window.addEventListener("resize",()=>{requestAnimationFrame(e)}),window.addEventListener("pageshow",e)}function P(){const e=Array.from(document.querySelectorAll("video.hero-video")),o=Array.from(document.querySelectorAll(".hero-poster"));if(!e.length)return;const t=i=>{try{i.muted=!0,i.playsInline=!0,i.setAttribute("playsinline",""),i.setAttribute("webkit-playsinline","")}catch{}},r=i=>i.offsetParent!==null||getComputedStyle(i).display!=="none",n=i=>{if(!i)return;t(i);const l=i.play();l&&typeof l.then=="function"&&l.catch(()=>{})},s=i=>{try{i.pause()}catch{}},c=i=>{let l=i.previousElementSibling;for(;l&&!l.classList?.contains("hero-poster");)l=l.previousElementSibling;return l&&l.classList?.contains("hero-poster")?l:o.find(f=>i.classList.contains("sm:hidden")&&f.classList.contains("sm:hidden")||i.classList.contains("sm:block")&&f.classList.contains("sm:block"))||null};let a;const d=()=>{const i=e.find(r)||e[0];e.forEach(p=>{p!==i&&(s(p),p.classList.remove("is-ready"))}),o.forEach(p=>p.classList.remove("is-hidden"));const l=c(i),f=()=>{t(i);const p=()=>{i.classList.add("is-ready"),l&&l.classList.add("is-hidden")};i.addEventListener("playing",p,{once:!0}),i.addEventListener("canplay",p,{once:!0}),n(i)};clearTimeout(a),a=setTimeout(f,1e3)};d();let u;window.addEventListener("resize",()=>{clearTimeout(u),u=setTimeout(d,200)});const m=()=>{d(),window.removeEventListener("pointerdown",m,!0),window.removeEventListener("keydown",m,!0),window.removeEventListener("touchstart",m,!0),window.removeEventListener("scroll",m,!0)};window.addEventListener("pointerdown",m,!0),window.addEventListener("keydown",m,!0),window.addEventListener("touchstart",m,!0),window.addEventListener("scroll",m,!0),document.addEventListener("visibilitychange",()=>{document.hidden||d()})}function M(){document.querySelectorAll("[data-video-container]").forEach(o=>{const t=o.querySelector("video"),r=o.querySelector("[data-video-overlay]");if(!t||!r)return;const n=()=>r.classList.remove("hidden"),s=()=>r.classList.add("hidden");n(),r.addEventListener("click",()=>{s();const c=t.play();c&&typeof c.then=="function"&&c.catch(()=>n())}),t.addEventListener("play",s),t.addEventListener("playing",s),t.addEventListener("pause",n),t.addEventListener("ended",n)})}document.addEventListener("DOMContentLoaded",()=>{g(),A(),B(),R(),P(),M()});(function(){const o=document.querySelector("header");if(!o)return;const t=60;let r=!1;const n=c=>{r=!!c,o.classList.toggle("header--compact",r),requestAnimationFrame(g)},s=()=>{const c=window.scrollY>t;c!==r&&n(c)};window.addEventListener("scroll",s,{passive:!0}),s()})();
