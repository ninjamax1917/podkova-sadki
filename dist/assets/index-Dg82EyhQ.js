(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerPolicy&&(t.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?t.credentials="include":o.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(o){if(o.ep)return;o.ep=!0;const t=n(o);fetch(o.href,t)}})();function b(){const e=document.getElementById("year");e&&(e.textContent=String(new Date().getFullYear()))}function E(){try{const e=performance.getEntriesByType("navigation")[0];if(e&&e.type)return e.type}catch{}try{const e=performance.navigation&&performance.navigation.type;if(e===1)return"reload";if(e===2)return"back_forward"}catch{}return"navigate"}function L(){try{"scrollRestoration"in history&&(history.scrollRestoration="manual")}catch{}const e=`restore:${location.pathname}${location.search}`,r=a=>{if(!a)return!1;const d=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed",'[tabindex]:not([tabindex="-1"])','[contenteditable="true"]'];return a.matches?.(d.join(","))},n=()=>{try{const a=document.activeElement,d=a&&a!==document.body&&a!==document.documentElement&&(a.id||null),l={x:window.scrollX,y:window.scrollY,activeId:d,ts:Date.now()};sessionStorage.setItem(e,JSON.stringify(l))}catch{}};let i=0;const o=()=>{const a=Date.now();a-i>150&&(i=a,n())};window.addEventListener("scroll",o,{passive:!0}),window.addEventListener("focusin",o,!0),window.addEventListener("beforeunload",n),window.addEventListener("pagehide",n),document.addEventListener("visibilitychange",()=>{document.hidden&&n()});const t=a=>{try{const d=sessionStorage.getItem(e);if(!d)return!1;const l=JSON.parse(d);if(!l||typeof l.y!="number"||location.hash&&a==="navigate")return!1;if(setTimeout(()=>{if(window.__didEarlyRestore)return;const s=document.documentElement,u=s.style.scrollBehavior;s.style.scrollBehavior="auto",window.scrollTo(l.x||0,l.y||0),requestAnimationFrame(()=>{window.scrollTo(l.x||0,l.y||0),s.style.scrollBehavior=u||""})},0),l.activeId){const s=document.getElementById(l.activeId);if(s){const u=!r(s);u&&s.setAttribute("tabindex","-1");try{s.focus({preventScroll:!0})}catch{}u&&s.addEventListener("blur",()=>s.removeAttribute("tabindex"),{once:!0})}}return!0}catch{return!1}},c=E();window.addEventListener("pageshow",a=>{const d=a.persisted?"back_forward":c;t(d)}),window.addEventListener("load",()=>{t(c)},{once:!0});try{const a=`restore:has:${location.pathname}${location.search}`,d=sessionStorage.getItem(e)?"1":"";sessionStorage.setItem(a,d)}catch{}}function A(){try{"scrollRestoration"in history}catch{}const e=()=>window.matchMedia("(max-width: 639px)").matches,r=()=>!window.location.hash,n=()=>{try{const t=`restore:${location.pathname}${location.search}`,c=sessionStorage.getItem(t);if(!c)return!1;const a=JSON.parse(c);return a&&typeof a.y=="number"&&a.y>0}catch{return!1}},i=()=>{const t=document.documentElement,c=t.style.scrollBehavior;t.style.scrollBehavior="auto",window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0,requestAnimationFrame(()=>{window.scrollTo(0,0),t.style.scrollBehavior=c||""})},o=()=>{e()&&r()&&!n()&&i()};document.readyState==="complete"?o():window.addEventListener("load",o,{once:!0}),window.addEventListener("pageshow",t=>{t.persisted&&o()})}function S(){document.querySelectorAll('header a[href^="#"], nav a[href^="#"]').forEach(r=>{r.addEventListener("click",n=>{const i=r.getAttribute("href");if(!i||i==="#")return;const o=document.querySelector(i);o&&(n.preventDefault(),o.scrollIntoView({behavior:"smooth",block:"start"}),history.pushState(null,"",i))})})}function I(){const e=document.getElementById("backToTop"),r=()=>{if(!e)return;const n=window.scrollY>400;e.classList.toggle("opacity-100",n),e.classList.toggle("pointer-events-auto",n),e.classList.toggle("opacity-0",!n),e.classList.toggle("pointer-events-none",!n)};window.addEventListener("scroll",r,{passive:!0}),r(),e?.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})}function T(){const e="79131877470",r="+79131877470",n=document.querySelectorAll('a[aria-label="Max"]'),i=document.querySelectorAll('a[aria-label="Telegram"]'),o=document.querySelectorAll('a[aria-label="WhatsApp"]');n.forEach(t=>{const c=`https://max.ru/?phone=${encodeURIComponent(r)}`;t.setAttribute("href",c),t.setAttribute("rel","noopener"),t.setAttribute("target",t.getAttribute("target")||"_blank")}),i.forEach(t=>{const c=`tg://resolve?phone=${e}`,a=`https://t.me/+${e}`;t.setAttribute("href",a),t.setAttribute("rel","noopener"),t.setAttribute("target",t.getAttribute("target")||"_blank"),t.addEventListener("click",d=>{try{d.preventDefault();const l=t.getAttribute("target")||"_self",m=s=>{l==="_self"?location.href=s:window.open(s,l)};m(c),setTimeout(()=>m(a),800)}catch{const l=t.getAttribute("target")||"_self";l==="_self"?location.href=a:window.open(a,l)}})}),o.forEach(t=>{const c=`whatsapp://send?phone=${e}`,a=`https://wa.me/${e}`;t.setAttribute("href",a),t.setAttribute("rel","noopener"),t.setAttribute("target",t.getAttribute("target")||"_blank"),t.addEventListener("click",d=>{try{d.preventDefault();const l=t.getAttribute("target")||"_self",m=s=>{l==="_self"?location.href=s:window.open(s,l)};m(c),setTimeout(()=>m(a),800)}catch{const l=t.getAttribute("target")||"_self";l==="_self"?location.href=a:window.open(a,l)}})})}function k(){b(),L(),A(),S(),I(),T()}function x(e,r,n){const i=encodeURIComponent(e||""),o=encodeURIComponent(r||""),t=encodeURIComponent(n||"");return`Заявка с сайта «Подкова»%0AИмя: ${i}%0AТелефон: ${o}%0AСообщение: ${t}`}function B(){document.getElementById("contactSubmit")?.addEventListener("click",()=>{const r=(document.getElementById("cf-name")?.value||"").trim(),n=(document.getElementById("cf-phone")?.value||"").trim(),i=(document.getElementById("cf-message")?.value||"").trim(),o=x(r,n,i),c=`https://t.me/share/url?url=${encodeURIComponent("https://example.com")}&text=${o}`,a=`tg://msg?text=${o}`,d=window.open(a,"_blank");setTimeout(()=>{(!d||d.closed||typeof d.closed>"u")&&window.open(c,"_blank")},300)})}const C="d36b5481-4624-40a6-8698-b0dd0c33d972",h=[45.946525,38.111089];let y=null,w=!1;function O(){if(window.ymaps)return Promise.resolve();if(y)return y;const e=`https://api-maps.yandex.ru/2.1/?apikey=${encodeURIComponent(C)}&lang=ru_RU`;return y=new Promise((r,n)=>{const i=document.createElement("script");i.src=e,i.async=!0,i.onerror=()=>n(new Error("Yandex Maps API failed to load")),i.onload=()=>{window.ymaps?.ready?window.ymaps.ready(r):r()},document.head.appendChild(i)}),y}function P(e){try{e.textContent="";const r=new window.ymaps.Map(e,{center:h,zoom:17.3,controls:["zoomControl","fullscreenControl","routeButtonControl"]},{suppressMapOpenBlock:!0,yandexMapDisablePoiInteractivity:!0}),n=new window.ymaps.Placemark(h,{balloonContentHeader:"База отдыха «Подкова»",balloonContentBody:'Хутор Садки, Приморско‑Ахтарский район. Тел.: <a href="tel:+79131877470">+7 913 187‑74‑70</a>',hintContent:"База отдыха «Подкова»"},{preset:"islands#redIcon"});r.geoObjects.add(n);try{const o=r.controls.get("routeButtonControl");o&&o.routePanel&&(o.routePanel.state.set({fromEnabled:!0,to:h}),o.routePanel.options.set({allowSwitch:!0,types:{auto:!0,masstransit:!0,pedestrian:!0,bicycle:!0}}))}catch{}const i=()=>r.setCenter(h);window.addEventListener("resize",i)}catch{g(e)}}function g(e){if(!e)return;e.innerHTML="";const r="https://yandex.ru/map-widget/v1/?ll=38.111089%2C45.946525&pt=38.111089%2C45.946525&z=15",n=document.createElement("iframe");n.src=r,n.style.border="0",n.width="100%",n.height="100%",n.setAttribute("loading","lazy"),e.appendChild(n)}function R(){const e=document.getElementById("yandexMap");if(!e||w)return;w=!0;const r=()=>{O().then(()=>P(e)).catch(()=>g(e))};if("IntersectionObserver"in window){const n=new IntersectionObserver(i=>{i.some(t=>t.isIntersecting)&&(n.disconnect(),r())},{rootMargin:"200px"});n.observe(e)}else window.addEventListener("load",()=>setTimeout(r,500))}function v(){const e=()=>{const r=document.querySelector("header"),n=r?Math.ceil(r.getBoundingClientRect().height):64;document.documentElement.style.setProperty("--header-h",n+"px")};e(),window.addEventListener("resize",()=>{requestAnimationFrame(e)}),window.addEventListener("pageshow",e)}function _(){const e=Array.from(document.querySelectorAll("video.hero-video")),r=Array.from(document.querySelectorAll(".hero-poster"));if(!e.length)return;const n=s=>{try{s.muted=!0,s.playsInline=!0,s.setAttribute("playsinline",""),s.setAttribute("webkit-playsinline","")}catch{}},i=s=>s.offsetParent!==null||getComputedStyle(s).display!=="none",o=s=>{if(!s)return;n(s);const u=s.play();u&&typeof u.then=="function"&&u.catch(()=>{})},t=s=>{try{s.pause()}catch{}},c=s=>{let u=s.previousElementSibling;for(;u&&!u.classList?.contains("hero-poster");)u=u.previousElementSibling;return u&&u.classList?.contains("hero-poster")?u:r.find(f=>s.classList.contains("sm:hidden")&&f.classList.contains("sm:hidden")||s.classList.contains("sm:block")&&f.classList.contains("sm:block"))||null};let a;const d=()=>{const s=e.find(i)||e[0];e.forEach(p=>{p!==s&&(t(p),p.classList.remove("is-ready"))}),r.forEach(p=>p.classList.remove("is-hidden"));const u=c(s),f=()=>{n(s);const p=()=>{s.classList.add("is-ready"),u&&u.classList.add("is-hidden")};s.addEventListener("playing",p,{once:!0}),s.addEventListener("canplay",p,{once:!0}),o(s)};clearTimeout(a),a=setTimeout(f,1e3)};d();let l;window.addEventListener("resize",()=>{clearTimeout(l),l=setTimeout(d,200)});const m=()=>{d(),window.removeEventListener("pointerdown",m,!0),window.removeEventListener("keydown",m,!0),window.removeEventListener("touchstart",m,!0),window.removeEventListener("scroll",m,!0)};window.addEventListener("pointerdown",m,!0),window.addEventListener("keydown",m,!0),window.addEventListener("touchstart",m,!0),window.addEventListener("scroll",m,!0),document.addEventListener("visibilitychange",()=>{document.hidden||d()})}function $(){document.querySelectorAll("[data-video-container]").forEach(r=>{const n=r.querySelector("video"),i=r.querySelector("[data-video-overlay]");if(!n||!i)return;const o=()=>i.classList.remove("hidden"),t=()=>i.classList.add("hidden");o(),i.addEventListener("click",()=>{t();const c=n.play();c&&typeof c.then=="function"&&c.catch(()=>o())}),n.addEventListener("play",t),n.addEventListener("playing",t),n.addEventListener("pause",o),n.addEventListener("ended",o)})}document.addEventListener("DOMContentLoaded",()=>{v(),k(),B(),R(),_(),$()});(function(){const r=document.querySelector("header");if(!r)return;const n=60;let i=!1;const o=c=>{i=!!c,r.classList.toggle("header--compact",i),requestAnimationFrame(v)},t=()=>{const c=window.scrollY>n;c!==i&&o(c)};window.addEventListener("scroll",t,{passive:!0}),t()})();
