(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}})();function D(){const t=document.getElementById("year");t&&(t.textContent=String(new Date().getFullYear()))}function U(){try{const t=performance.getEntriesByType("navigation")[0];if(t&&t.type)return t.type}catch{}try{const t=performance.navigation&&performance.navigation.type;if(t===1)return"reload";if(t===2)return"back_forward"}catch{}return"navigate"}function F(){try{"scrollRestoration"in history&&(history.scrollRestoration="manual")}catch{}const t=`restore:${location.pathname}${location.search}`,e=a=>{if(!a)return!1;const d=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed",'[tabindex]:not([tabindex="-1"])','[contenteditable="true"]'];return a.matches?.(d.join(","))},o=()=>{try{const a=document.activeElement,d=a&&a!==document.body&&a!==document.documentElement&&(a.id||null),l={x:window.scrollX,y:window.scrollY,activeId:d,ts:Date.now()};sessionStorage.setItem(t,JSON.stringify(l))}catch{}};let i=0;const r=()=>{const a=Date.now();a-i>150&&(i=a,o())};window.addEventListener("scroll",r,{passive:!0}),window.addEventListener("focusin",r,!0),window.addEventListener("beforeunload",o),window.addEventListener("pagehide",o),document.addEventListener("visibilitychange",()=>{document.hidden&&o()});const n=a=>{try{const d=sessionStorage.getItem(t);if(!d)return!1;const l=JSON.parse(d);if(!l||typeof l.y!="number"||location.hash&&a==="navigate")return!1;if(setTimeout(()=>{if(window.__didEarlyRestore)return;const s=document.documentElement,m=s.style.scrollBehavior;s.style.scrollBehavior="auto",window.scrollTo(l.x||0,l.y||0),requestAnimationFrame(()=>{window.scrollTo(l.x||0,l.y||0),s.style.scrollBehavior=m||""})},0),l.activeId){const s=document.getElementById(l.activeId);if(s){const m=!e(s);m&&s.setAttribute("tabindex","-1");try{s.focus({preventScroll:!0})}catch{}m&&s.addEventListener("blur",()=>s.removeAttribute("tabindex"),{once:!0})}}return!0}catch{return!1}},c=U();window.addEventListener("pageshow",a=>{const d=a.persisted?"back_forward":c;n(d)}),window.addEventListener("load",()=>{n(c)},{once:!0});try{const a=`restore:has:${location.pathname}${location.search}`,d=sessionStorage.getItem(t)?"1":"";sessionStorage.setItem(a,d)}catch{}}function N(){try{"scrollRestoration"in history}catch{}const t=()=>window.matchMedia("(max-width: 639px)").matches,e=()=>!window.location.hash,o=()=>{try{const n=`restore:${location.pathname}${location.search}`,c=sessionStorage.getItem(n);if(!c)return!1;const a=JSON.parse(c);return a&&typeof a.y=="number"&&a.y>0}catch{return!1}},i=()=>{const n=document.documentElement,c=n.style.scrollBehavior;n.style.scrollBehavior="auto",window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0,requestAnimationFrame(()=>{window.scrollTo(0,0),n.style.scrollBehavior=c||""})},r=()=>{t()&&e()&&!o()&&i()};document.readyState==="complete"?r():window.addEventListener("load",r,{once:!0}),window.addEventListener("pageshow",n=>{n.persisted&&r()})}function z(){document.querySelectorAll('header a[href^="#"], nav a[href^="#"]').forEach(e=>{e.addEventListener("click",o=>{const i=e.getAttribute("href");if(!i||i==="#")return;const r=document.querySelector(i);r&&(o.preventDefault(),r.scrollIntoView({behavior:"smooth",block:"start"}),history.pushState(null,"",i))})})}function H(){const t=document.getElementById("backToTop"),e=()=>{if(!t)return;const o=window.scrollY>400;t.classList.toggle("opacity-100",o),t.classList.toggle("pointer-events-auto",o),t.classList.toggle("opacity-0",!o),t.classList.toggle("pointer-events-none",!o)};window.addEventListener("scroll",e,{passive:!0}),e(),t?.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})}function Y(){const t="79131877470",e="+79131877470",o=document.querySelectorAll('a[aria-label="Max"]'),i=document.querySelectorAll('a[aria-label="Telegram"]'),r=document.querySelectorAll('a[aria-label="WhatsApp"]');o.forEach(n=>{const c=`https://max.ru/?phone=${encodeURIComponent(e)}`;n.setAttribute("href",c),n.setAttribute("rel","noopener"),n.setAttribute("target",n.getAttribute("target")||"_blank")}),i.forEach(n=>{const c=`tg://resolve?phone=${t}`,a=`https://t.me/+${t}`;n.setAttribute("href",a),n.setAttribute("rel","noopener"),n.setAttribute("target",n.getAttribute("target")||"_blank"),n.addEventListener("click",d=>{try{d.preventDefault();const l=n.getAttribute("target")||"_self",p=s=>{l==="_self"?location.href=s:window.open(s,l)};p(c),setTimeout(()=>p(a),800)}catch{const l=n.getAttribute("target")||"_self";l==="_self"?location.href=a:window.open(a,l)}})}),r.forEach(n=>{const c=`whatsapp://send?phone=${t}`,a=`https://wa.me/${t}`;n.setAttribute("href",a),n.setAttribute("rel","noopener"),n.setAttribute("target",n.getAttribute("target")||"_blank"),n.addEventListener("click",d=>{try{d.preventDefault();const l=n.getAttribute("target")||"_self",p=s=>{l==="_self"?location.href=s:window.open(s,l)};p(c),setTimeout(()=>p(a),800)}catch{const l=n.getAttribute("target")||"_self";l==="_self"?location.href=a:window.open(a,l)}})})}function X(){D(),F(),N(),z(),H(),Y()}function V(t,e,o){const i=encodeURIComponent(t||""),r=encodeURIComponent(e||""),n=encodeURIComponent(o||"");return`Заявка с сайта «Подкова»%0AИмя: ${i}%0AТелефон: ${r}%0AСообщение: ${n}`}function W(){document.getElementById("contactSubmit")?.addEventListener("click",()=>{const e=(document.getElementById("cf-name")?.value||"").trim(),o=(document.getElementById("cf-phone")?.value||"").trim(),i=(document.getElementById("cf-message")?.value||"").trim(),r=V(e,o,i),c=`https://t.me/share/url?url=${encodeURIComponent("https://example.com")}&text=${r}`,a=`tg://msg?text=${r}`,d=window.open(a,"_blank");setTimeout(()=>{(!d||d.closed||typeof d.closed>"u")&&window.open(c,"_blank")},300)})}const K="d36b5481-4624-40a6-8698-b0dd0c33d972",L=[45.946525,38.111089];let E=null,P=!1;function j(){if(window.ymaps)return Promise.resolve();if(E)return E;const t=`https://api-maps.yandex.ru/2.1/?apikey=${encodeURIComponent(K)}&lang=ru_RU`;return E=new Promise((e,o)=>{const i=document.createElement("script");i.src=t,i.async=!0,i.onerror=()=>o(new Error("Yandex Maps API failed to load")),i.onload=()=>{window.ymaps?.ready?window.ymaps.ready(e):e()},document.head.appendChild(i)}),E}function J(t){try{t.textContent="";const e=new window.ymaps.Map(t,{center:L,zoom:17.3,controls:["zoomControl","fullscreenControl","routeButtonControl"]},{suppressMapOpenBlock:!0,yandexMapDisablePoiInteractivity:!0}),o=new window.ymaps.Placemark(L,{balloonContentHeader:"База отдыха «Подкова»",balloonContentBody:'Хутор Садки, Приморско‑Ахтарский район. Тел.: <a href="tel:+79131877470">+7 913 187‑74‑70</a>',hintContent:"База отдыха «Подкова»"},{preset:"islands#redIcon"});e.geoObjects.add(o);try{const r=e.controls.get("routeButtonControl");r&&r.routePanel&&(r.routePanel.state.set({fromEnabled:!0,to:L}),r.routePanel.options.set({allowSwitch:!0,types:{auto:!0,masstransit:!0,pedestrian:!0,bicycle:!0}}))}catch{}const i=()=>e.setCenter(L);window.addEventListener("resize",i)}catch{q(t)}}function q(t){if(!t)return;t.innerHTML="";const e="https://yandex.ru/map-widget/v1/?ll=38.111089%2C45.946525&pt=38.111089%2C45.946525&z=15",o=document.createElement("iframe");o.src=e,o.style.border="0",o.width="100%",o.height="100%",o.setAttribute("loading","lazy"),t.appendChild(o)}function G(){const t=document.getElementById("yandexMap");if(!t||P)return;P=!0;const e=()=>{j().then(()=>J(t)).catch(()=>q(t))};if("IntersectionObserver"in window){const o=new IntersectionObserver(i=>{i.some(n=>n.isIntersecting)&&(o.disconnect(),e())},{rootMargin:"200px"});o.observe(t)}else window.addEventListener("load",()=>setTimeout(e,500))}function O(){const t=()=>{const e=document.querySelector("header"),o=e?Math.ceil(e.getBoundingClientRect().height):64;document.documentElement.style.setProperty("--header-h",o+"px")};t(),window.addEventListener("resize",()=>{requestAnimationFrame(t)}),window.addEventListener("pageshow",t)}function Q(){const t=Array.from(document.querySelectorAll("video.hero-video")),e=Array.from(document.querySelectorAll(".hero-poster"));if(!t.length)return;const o=s=>{try{s.muted=!0,s.playsInline=!0,s.setAttribute("playsinline",""),s.setAttribute("webkit-playsinline","")}catch{}},i=s=>s.offsetParent!==null||getComputedStyle(s).display!=="none",r=s=>{if(!s)return;o(s);const m=s.play();m&&typeof m.then=="function"&&m.catch(()=>{})},n=s=>{try{s.pause()}catch{}},c=s=>{let m=s.previousElementSibling;for(;m&&!m.classList?.contains("hero-poster");)m=m.previousElementSibling;return m&&m.classList?.contains("hero-poster")?m:e.find(w=>s.classList.contains("sm:hidden")&&w.classList.contains("sm:hidden")||s.classList.contains("sm:block")&&w.classList.contains("sm:block"))||null};let a;const d=()=>{const s=t.find(i)||t[0];t.forEach(h=>{h!==s&&(n(h),h.classList.remove("is-ready"))}),e.forEach(h=>h.classList.remove("is-hidden"));const m=c(s),w=()=>{o(s);const h=()=>{s.classList.add("is-ready"),m&&m.classList.add("is-hidden")};s.addEventListener("playing",h,{once:!0}),s.addEventListener("canplay",h,{once:!0}),r(s)};clearTimeout(a),a=setTimeout(w,1e3)};d();let l;window.addEventListener("resize",()=>{clearTimeout(l),l=setTimeout(d,200)});const p=()=>{d(),window.removeEventListener("pointerdown",p,!0),window.removeEventListener("keydown",p,!0),window.removeEventListener("touchstart",p,!0),window.removeEventListener("scroll",p,!0)};window.addEventListener("pointerdown",p,!0),window.addEventListener("keydown",p,!0),window.addEventListener("touchstart",p,!0),window.addEventListener("scroll",p,!0),document.addEventListener("visibilitychange",()=>{document.hidden||d()})}function Z(){document.querySelectorAll("[data-video-container]").forEach(e=>{const o=e.querySelector("video"),i=e.querySelector("[data-video-overlay]");if(!o||!i)return;const r=()=>i.classList.remove("hidden"),n=()=>i.classList.add("hidden");r(),i.addEventListener("click",()=>{n();const c=o.play();c&&typeof c.then=="function"&&c.catch(()=>r())}),o.addEventListener("play",n),o.addEventListener("playing",n),o.addEventListener("pause",r),o.addEventListener("ended",r)})}document.addEventListener("DOMContentLoaded",()=>{O(),X(),W(),G(),Q(),Z(),ee()});(function(){const e=document.querySelector("header");if(!e)return;const o=60;let i=!1;const r=c=>{i=!!c,e.classList.toggle("header--compact",i),requestAnimationFrame(O)},n=()=>{const c=window.scrollY>o;c!==i&&r(c)};window.addEventListener("scroll",n,{passive:!0}),n()})();function ee(){const t=document.querySelector('[data-carousel="gallery"]');if(!t)return;const e=t.querySelector("[data-carousel-track]"),o=t.querySelector("[data-carousel-prev]"),i=t.querySelector("[data-carousel-next]"),r=t.querySelector("[data-carousel-dots]");if(!e)return;const n=Array.from(e.children),c=()=>t.getBoundingClientRect().width,a=n.map((u,f)=>{const y=document.createElement("button");return y.type="button",y.className="w-2.5 h-2.5 rounded-full bg-slate-300 aria-[current=true]:bg-emerald-600",y.setAttribute("aria-label",`Показать слайд ${f+1}`),y.addEventListener("click",()=>s(f)),r?.appendChild(y),y}),d=()=>{const u=c(),f=Math.round(e.scrollLeft/(u+16));return Math.max(0,Math.min(n.length-1,f))};let l=0;const p=u=>{l=u,a.forEach((f,y)=>f.setAttribute("aria-current",String(y===u)))},s=u=>{const f=c();e.scrollTo({left:u*(f+16),behavior:"smooth"}),p(u)};o?.addEventListener("click",()=>s(Math.max(0,l-1))),i?.addEventListener("click",()=>s(Math.min(n.length-1,l+1)));let m;e.addEventListener("scroll",()=>{cancelAnimationFrame(m),m=requestAnimationFrame(()=>p(d()))},{passive:!0}),window.addEventListener("resize",()=>p(d()));let w=!1,h=0,A=0,g=!1;const k=u=>{u.pointerType==="mouse"&&u.button!==0||(w=!0,g=!1,e.setPointerCapture?.(u.pointerId),h=u.clientX,A=e.scrollLeft,e.classList.add("is-dragging"))},T=u=>{if(!w)return;const f=u.clientX-h;Math.abs(f)>3&&(g=!0),e.scrollLeft=A-f},b=u=>{if(!w)return;w=!1,e.releasePointerCapture?.(u.pointerId),e.classList.remove("is-dragging");const f=d();s(f)},R=()=>{e.addEventListener("pointerdown",k),e.addEventListener("pointermove",T,{passive:!0}),window.addEventListener("pointerup",b),window.addEventListener("pointercancel",b)},I=()=>{e.removeEventListener("pointerdown",k),e.removeEventListener("pointermove",T),window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",b)},x=u=>{g&&(u.preventDefault(),u.stopPropagation(),g=!1)},_=()=>e.addEventListener("click",x,!0),C=()=>e.removeEventListener("click",x,!0),M=u=>{Math.abs(u.deltaX)>Math.abs(u.deltaY)&&(u.preventDefault(),e.scrollLeft+=u.deltaX)},$=()=>e.addEventListener("wheel",M,{passive:!1}),B=()=>e.removeEventListener("wheel",M),v=window.matchMedia?window.matchMedia("(pointer: coarse)"):{matches:"ontouchstart"in window},S=()=>{!!v.matches?(B(),I(),C(),R(),$(),_(),e.style.overflowX="auto"):(B(),I(),C(),e.style.overflowX="hidden",s(d()))};S(),v.addEventListener?v.addEventListener("change",S):v.addListener&&v.addListener(S),p(0)}
