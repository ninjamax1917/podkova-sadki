(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function s(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(e){if(e.ep)return;e.ep=!0;const o=s(e);fetch(e.href,o)}})();function y(){const t=document.getElementById("year");t&&(t.textContent=String(new Date().getFullYear()))}function w(){try{const t=performance.getEntriesByType("navigation")[0];if(t&&t.type)return t.type}catch{}try{const t=performance.navigation&&performance.navigation.type;if(t===1)return"reload";if(t===2)return"back_forward"}catch{}return"navigate"}function v(){try{"scrollRestoration"in history&&(history.scrollRestoration="manual")}catch{}const t=`restore:${location.pathname}${location.search}`,r=c=>{if(!c)return!1;const d=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed",'[tabindex]:not([tabindex="-1"])','[contenteditable="true"]'];return c.matches?.(d.join(","))},s=()=>{try{const c=document.activeElement,d=c&&c!==document.body&&c!==document.documentElement&&(c.id||null),u={x:window.scrollX,y:window.scrollY,activeId:d,ts:Date.now()};sessionStorage.setItem(t,JSON.stringify(u))}catch{}};let i=0;const e=()=>{const c=Date.now();c-i>150&&(i=c,s())};window.addEventListener("scroll",e,{passive:!0}),window.addEventListener("focusin",e,!0),window.addEventListener("beforeunload",s),window.addEventListener("pagehide",s),document.addEventListener("visibilitychange",()=>{document.hidden&&s()});const o=c=>{try{const d=sessionStorage.getItem(t);if(!d)return!1;const u=JSON.parse(d);if(!u||typeof u.y!="number"||location.hash&&c==="navigate")return!1;if(setTimeout(()=>{if(window.__didEarlyRestore)return;const n=document.documentElement,l=n.style.scrollBehavior;n.style.scrollBehavior="auto",window.scrollTo(u.x||0,u.y||0),requestAnimationFrame(()=>{window.scrollTo(u.x||0,u.y||0),n.style.scrollBehavior=l||""})},0),u.activeId){const n=document.getElementById(u.activeId);if(n){const l=!r(n);l&&n.setAttribute("tabindex","-1");try{n.focus({preventScroll:!0})}catch{}l&&n.addEventListener("blur",()=>n.removeAttribute("tabindex"),{once:!0})}}return!0}catch{return!1}},a=w();window.addEventListener("pageshow",c=>{const d=c.persisted?"back_forward":a;o(d)}),window.addEventListener("load",()=>{o(a)},{once:!0});try{const c=`restore:has:${location.pathname}${location.search}`,d=sessionStorage.getItem(t)?"1":"";sessionStorage.setItem(c,d)}catch{}}function g(){try{"scrollRestoration"in history}catch{}const t=()=>window.matchMedia("(max-width: 639px)").matches,r=()=>!window.location.hash,s=()=>{try{const o=`restore:${location.pathname}${location.search}`,a=sessionStorage.getItem(o);if(!a)return!1;const c=JSON.parse(a);return c&&typeof c.y=="number"&&c.y>0}catch{return!1}},i=()=>{const o=document.documentElement,a=o.style.scrollBehavior;o.style.scrollBehavior="auto",window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0,requestAnimationFrame(()=>{window.scrollTo(0,0),o.style.scrollBehavior=a||""})},e=()=>{t()&&r()&&!s()&&i()};document.readyState==="complete"?e():window.addEventListener("load",e,{once:!0}),window.addEventListener("pageshow",o=>{o.persisted&&e()})}function L(){document.querySelectorAll('header a[href^="#"], nav a[href^="#"]').forEach(r=>{r.addEventListener("click",s=>{const i=r.getAttribute("href");if(!i||i==="#")return;const e=document.querySelector(i);e&&(s.preventDefault(),e.scrollIntoView({behavior:"smooth",block:"start"}),history.pushState(null,"",i))})})}function E(){const t=document.getElementById("backToTop"),r=()=>{if(!t)return;const s=window.scrollY>400;t.classList.toggle("opacity-100",s),t.classList.toggle("pointer-events-auto",s),t.classList.toggle("opacity-0",!s),t.classList.toggle("pointer-events-none",!s)};window.addEventListener("scroll",r,{passive:!0}),r(),t?.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})}function b(){y(),v(),g(),L(),E()}function S(t,r,s){const i=encodeURIComponent(t||""),e=encodeURIComponent(r||""),o=encodeURIComponent(s||"");return`Заявка с сайта «Подкова»%0AИмя: ${i}%0AТелефон: ${e}%0AСообщение: ${o}`}function T(){document.getElementById("contactSubmit")?.addEventListener("click",()=>{const r=(document.getElementById("cf-name")?.value||"").trim(),s=(document.getElementById("cf-phone")?.value||"").trim(),i=(document.getElementById("cf-message")?.value||"").trim(),e=S(r,s,i),a=`https://t.me/share/url?url=${encodeURIComponent("https://example.com")}&text=${e}`,c=`tg://msg?text=${e}`,d=window.open(c,"_blank");setTimeout(()=>{(!d||d.closed||typeof d.closed>"u")&&window.open(a,"_blank")},300)})}function p(){const t=()=>{const r=document.querySelector("header"),s=r?Math.ceil(r.getBoundingClientRect().height):64;document.documentElement.style.setProperty("--header-h",s+"px")};t(),window.addEventListener("resize",()=>{requestAnimationFrame(t)}),window.addEventListener("pageshow",t)}function I(){const t=Array.from(document.querySelectorAll("video.hero-video")),r=Array.from(document.querySelectorAll(".hero-poster"));if(!t.length)return;const s=n=>{try{n.muted=!0,n.playsInline=!0,n.setAttribute("playsinline",""),n.setAttribute("webkit-playsinline","")}catch{}},i=n=>n.offsetParent!==null||getComputedStyle(n).display!=="none",e=n=>{if(!n)return;s(n);const l=n.play();l&&typeof l.then=="function"&&l.catch(()=>{})},o=n=>{try{n.pause()}catch{}},a=n=>{let l=n.previousElementSibling;for(;l&&!l.classList?.contains("hero-poster");)l=l.previousElementSibling;return l&&l.classList?.contains("hero-poster")?l:r.find(h=>n.classList.contains("sm:hidden")&&h.classList.contains("sm:hidden")||n.classList.contains("sm:block")&&h.classList.contains("sm:block"))||null};let c;const d=()=>{const n=t.find(i)||t[0];t.forEach(f=>{f!==n&&(o(f),f.classList.remove("is-ready"))}),r.forEach(f=>f.classList.remove("is-hidden"));const l=a(n),h=()=>{s(n);const f=()=>{n.classList.add("is-ready"),l&&l.classList.add("is-hidden")};n.addEventListener("playing",f,{once:!0}),n.addEventListener("canplay",f,{once:!0}),e(n)};clearTimeout(c),c=setTimeout(h,1e3)};d();let u;window.addEventListener("resize",()=>{clearTimeout(u),u=setTimeout(d,200)});const m=()=>{d(),window.removeEventListener("pointerdown",m,!0),window.removeEventListener("keydown",m,!0),window.removeEventListener("touchstart",m,!0),window.removeEventListener("scroll",m,!0)};window.addEventListener("pointerdown",m,!0),window.addEventListener("keydown",m,!0),window.addEventListener("touchstart",m,!0),window.addEventListener("scroll",m,!0),document.addEventListener("visibilitychange",()=>{document.hidden||d()})}function A(){document.querySelectorAll("[data-video-container]").forEach(r=>{const s=r.querySelector("video"),i=r.querySelector("[data-video-overlay]");if(!s||!i)return;const e=()=>i.classList.remove("hidden"),o=()=>i.classList.add("hidden");e(),i.addEventListener("click",()=>{o();const a=s.play();a&&typeof a.then=="function"&&a.catch(()=>e())}),s.addEventListener("play",o),s.addEventListener("playing",o),s.addEventListener("pause",e),s.addEventListener("ended",e)})}document.addEventListener("DOMContentLoaded",()=>{p(),b(),T(),I(),A()});(function(){const r=document.querySelector("header");if(!r)return;const s=60;let i=!1;const e=a=>{i=!!a,r.classList.toggle("header--compact",i),requestAnimationFrame(p)},o=()=>{const a=window.scrollY>s;a!==i&&e(a)};window.addEventListener("scroll",o,{passive:!0}),o()})();
